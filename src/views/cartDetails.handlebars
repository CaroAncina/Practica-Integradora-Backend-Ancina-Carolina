<h2>Detalle del Carrito</h2>

{{#if cart.products.length}}
  <table>
    <thead>
      <tr>
        <th>Producto</th>
        <th>Cantidad</th>
        <th>Precio</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody>
      {{#each cart.products}}
        <tr>
          <td>{{this.product.title}}</td>
          <td>
            <input
              type="number"
              id="quantity-{{this.product._id}}"
              value="{{this.quantity}}"
              min="1"
            />
          </td>
          <td>{{this.product.price}}</td>
          <td>{{multiply this.quantity this.product.price}}</td>
          <td>
            <button
              onclick="updateProductQuantity('{{cart._id}}', '{{this.product._id}}')"
            >Actualizar</button>
          </td>
        </tr>
      {{/each}}
    </tbody>
  </table>

  <hr />

  <h3>Resumen del Carrito</h3>
  <p>Cantidad total de productos: {{totalQuantity}}</p>
  <p>Total a pagar: ${{totalPrice}}</p>

  <button id="purchaseButton" onclick="confirmPurchase()">Realizar compra</button>

  <button onclick="clearCart('{{cart._id}}')">Vaciar carrito</button>
{{else}}
  <p>No hay productos en este carrito.</p>
{{/if}}

<input type="hidden" id="cartId" value="{{cart._id}}" />

<button onclick="location.href='/products'">Volver a productos</button>

<script src="/js/carts.js"></script>
<script src="/js/products.js"></script>

